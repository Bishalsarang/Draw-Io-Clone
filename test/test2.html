<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <title>Document</title>
</head>

<body>
   <svg id="drawing-areas" class="left" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
      viewBox="0 0 800 800" style="height: 800px; width: 800px;">
      <!-- <ellipse class="connector-button" cx="40" cy="40" rx="10" ry="10" pointer-events="all"></ellipse>
        <ellipse class="connector-button" cx="100" cy="100" rx="10" ry="10" pointer-events="all"></ellipse>
        <line class="connector-line" x1="40" y1="40" x2="100" y2="100" style="stroke:rgb(255,0,0);stroke-width:2" /> -->
      <g>

         <line class='connector' x1="80" y1="10" x2="80" y2="20" stroke="#29b6f2" stroke-width=' 2' />
         <circle class="point" xmlns="http://www.w3.org/2000/svg" cx="80" cy="10" r="2" stroke="#fff" fill="red"
            stroke-width="1" pointer-events="all" />
         <circle class="point" xmlns="http://www.w3.org/2000/svg" cx="80" cy="20" r="2" stroke="#fff" fill="red"
            stroke-width="1" pointer-events="all" />
      </g>


   </svg>
   <script>
      let svg = document.getElementById('drawing-areas');
      let pointDrag = false;
      let pt = svg.createSVGPoint()
      let elements = document.querySelectorAll('.point');
      let selectedElem = null;

      function draw() {

      }

      elements.forEach((elem, index) => {
         svg.addEventListener('mousedown', startDragPoint);
         svg.addEventListener('mousemove', dragPoint);
         svg.addEventListener('mouseup', stopDragPoint);

         function startDragPoint(e) {
            e.preventDefault();
            // e.stopPropagation();
            console.log("mouse down")
            if (!pointDrag) {
               selectedElem = e.target;
               pointDrag = true;

            }

         }

         function dragPoint(e) {



            if (pointDrag && selectedElem.getAttributeNS(null, 'class') == 'point') {
               console.log("mouse move", selectedElem.getAttributeNS(null, 'class'))
               e.preventDefault();
               pt.x = e.clientX;
               pt.y = e.clientY;
               pointDrag = true;
               let p = pt.matrixTransform(svg.getScreenCTM().inverse());

               // selected lai ya move garney
               selectedElem.setAttributeNS(null, 'cx', p.x);
               selectedElem.setAttributeNS(null, 'cy', p.y);

               let line = document.querySelector('.connector')
               line.setAttributeNS(null, 'x2', p.x);
               line.setAttributeNS(null, 'y2', p.y);


            }

         }

         function stopDragPoint(e) {
            console.log("mouse down")
            pointDrag = false;
            selectedElem = null;
         }
      })
   </script>
</body>

</html>